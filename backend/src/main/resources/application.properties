spring.application.name=SocialMediaApp_backend

# Configuración del puerto (importante para Render)
server.port=${PORT:8080}

# Configuración de la base de datos
# IMPORTANTE: Configurar estas variables de entorno antes de ejecutar
# Charset: utf8mb4 para soporte completo de emojis y caracteres internacionales
spring.datasource.url=jdbc:mysql://${DB_HOST:localhost}:${DB_PORT:3306}/${DB_NAME:social_media_db}?useUnicode=true&characterEncoding=UTF-8&serverTimezone=UTC
spring.datasource.username=${DB_USER:root}
spring.datasource.password=${DB_PASSWORD}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# Configuración de JPA
spring.jpa.hibernate.ddl-auto=${JPA_DDL_AUTO:update}
spring.jpa.show-sql=${SHOW_SQL:false}
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect

# Configuración de JWT
# IMPORTANTE: JWT_SECRET debe ser una cadena de al menos 256 bits (32+ caracteres)
# Para generar un secret seguro, ejecuta: openssl rand -base64 32
# Ejemplo: jwt.secret=xK8dP2mN5vQ9wR1tY4uZ7sA0bC3eF6hJ9lM2nP5qR8t
jwt.secret=${JWT_SECRET}
# SEGURIDAD: Token expira en 15 minutos (900000ms) - máximo recomendado
jwt.expiration=${JWT_EXPIRATION:900000}

# Configuración CORS (configurada en WebConfig.java)
# IMPORTANTE: Especificar los orígenes permitidos explícitamente en producción
# Ejemplo: cors.allowed-origins=https://miapp.com,https://www.miapp.com
cors.allowed-origins=${CORS_ALLOWED_ORIGINS:http://localhost:3000}

# Configuración para archivos subidos
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB

# Configuración de seguridad - Bloqueo por intentos fallidos
security.login.max-attempts=${LOGIN_MAX_ATTEMPTS:5}
security.login.lock-duration-minutes=${LOGIN_LOCK_MINUTES:15}

# Configuración de logging
# En desarrollo usar DEBUG, en producción usar INFO o WARN
logging.level.root=${LOG_LEVEL:INFO}
logging.level.org.springframework.web=${WEB_LOG_LEVEL:INFO}
logging.level.com.socialmediaapp=${APP_LOG_LEVEL:INFO}
logging.level.org.springframework.security=${SECURITY_LOG_LEVEL:WARN}

# Evitar logging de información sensible
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n

# Configuración de auditoría - logs a archivo separado
logging.level.AUDIT=INFO
# Para producción, configurar appender a archivo dedicado en logback-spring.xml

# Configuración de Socket.IO para WebSocket en tiempo real
socketio.host=${SOCKETIO_HOST:0.0.0.0}
socketio.port=${SOCKETIO_PORT:9092}

# Cloudinary (opcional para desarrollo - configurar para producción)
cloudinary.cloud-name=${CLOUDINARY_CLOUD_NAME:demo}
cloudinary.api-key=${CLOUDINARY_API_KEY:demo}
cloudinary.api-secret=${CLOUDINARY_API_SECRET:demo}
